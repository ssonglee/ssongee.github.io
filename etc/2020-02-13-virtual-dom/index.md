---
layout: post
title:  "Virtual DOM"
subtitle: "리액트의 기본 중 기본 virtual DOM"
type: "Virtual DOM"
etc: true
text: true
order: 6
date: 13 Feb 2020
---

## 먼저 DOM 이란?

DOM이란 (Document Object Model)의 약자로 _객체를 통해 구조화된 문서를 표현하는 방법_ 이다.
DOM은 트리형태로 되어있어서 특정 node를 찾을 수도 있고 수정하거나 제거할 수 있다.
DOM은 동적인 UI에 최적화가 되어있지 않기 때문에 Jquery를 사용하여 동적인 효과를 줄 수 있다.

<br>

하지만 큰 규모의 웹 어플리케이션 (트위터, 페이스북 등) 에서는 스크롤을 내리다 보면 _수 많은 데이터_ 가 로딩되고 각 데이터를 표현하는 요소도 많아지게 된다.

<br>

이는 DOM 자체가 Javascript엔진에 비해 느려서 그런게 아니라, 브라우저 단에서 DOM의 변화가 일어나면 CSS를 다시 연산하고 레이아웃을 구성하고 웹 페이지를 repaint 하는데서 시간이 허비되기 때문에 느려진다고 할 수 있다! 
(레이아웃 구성을 reflow라고 하고 색상 변경 같은 레이아웃에 관계없는 것들은 repaint 라 한다.)

**즉! 웹 브라우저 등의 클라이언트 side의 로직때문에 어플리케이션의 속도가 느려진다고 볼 수 있다.**

이러한 HTML마크업을 시각적인 형태로 변환하는 시간이 드는것은 어쩔 수가 없다. 따라서 최소한의 DOM 조작을 통해 작업을 처리하는 방식으로 이를 개선할 수 있다!! 

<br>

그중에 DOM작업을 가상화 하여 미리 처리한 다음 한꺼번에 적용할 수 있는 방법이 있다.

그것이 바로바로~~~ Virtual DOM

## 그래서 Virtual DOM이 뭐쥬

virtual DOM을 이용하면 실제 DOM에 접근하여 조작하는 대신에, 이를 추상화시킨 자바스크립트 객체를 구성하여 사용한다.(실제 DOM의 가벼운 사본)

### 그래서 쉽게 말해서? 

_DOM의 상태를 메모리에 저장하고 변경전과 변경후의 상태를 비교한 뒤 최소한의 내용만 반영하는 기능!_  성능 향상(빠밤 <span class="label-emoji">&#11088;</span>)

<br>

가상 DOM은 DOM의 상태를 메모리 위에 계속 올려두고 DOM에 변경이 있을때만 해당 변경을 반영한다.

### 실제 DOM에 업데이트 하는 절차

React에서 데이터가 변하여 브라우저 상의 실제 DOM에 업데이트 하는 과정은 3가지 절차이다.
1. 데이터가 업데이터 되면 전체 UI를 Virtual DOM에 리렌더링 한다.
2. 이전 Virtual DOM에 있던 내용과 현재의 내용을 비교한다.
3. 바뀐 부분만 실제 DOM에 적용이 된다.
(컴포넌트가 업데이트 될 때 레이아웃 계산이 한번만 이뤄진다.)

_결론 : React는 지속해서 데이터가 변화하는 대규모 애플리케이션 구축을 위해 탄생했다._

<br>

[도움되는 동영상](https://www.youtube.com/watch?v=muc2ZF0QIO4)